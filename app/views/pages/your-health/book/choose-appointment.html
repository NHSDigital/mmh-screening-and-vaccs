{% extends 'layout-app.html' %}

{% set hub = "Your health" %}

{% set backLink = true %}
{% set backLinkURL = "/pages/your-health/book/" + programme.id + "/find-location" %}

{% set pageHeading = "Choose an appointment" %}

{% block content %}

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      {{ dynamicPageTitle({
        title: programme.name,
        titleSecondary: true,
        titleSmall: true
      })}}

      <p class="nhsuk-body-s nhsuk-u-secondary-text-color nhsuk-u-margin-bottom-4">{{ data['book-location'] }}</p>

      {% for day in appointments %}
        <h2 class="nhsuk-heading-s">{{ day.date }}</h2>

        <ul class="nhsapp-cards nhsapp-cards--stacked">
          {% for slot in day.slots %}
            <li class="nhsapp-card">
              <form id="appointmentForm{{ loop.parent.loop.index0 }}-{{ loop.index0 }}" method="post" action="/pages/your-health/book/{{ programme.id }}/confirm">
                <input type="hidden" name="book-date" value="{{ day.date }}">
                <input type="hidden" name="book-time" value="{{ slot.time }}">
                <div class="nhsapp-card__container">
                  <div class="nhsapp-card__content">
                    <a href="javascript:{}" onclick="document.getElementById('appointmentForm{{ loop.parent.loop.index0 }}-{{ loop.index0 }}').submit();" class="nhsapp-card__link nhsuk-link--no-visited-state">
                      {{ slot.time }}
                      <span class="nhsuk-u-visually-hidden">at {{ data['book-location'] }} on {{ day.date }}</span>
                    </a>
                  </div>
                  {{ nhsappIcon('chevronRight') }}
                </div>
              </form>
            </li>
          {% endfor %}
        </ul>
      {% endfor %}

    </div>
  </div>

{% endblock %}
